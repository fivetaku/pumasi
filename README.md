# 품앗이 (Pumasi)

Claude가 PM/감독 역할을 맡고, Codex CLI 인스턴스를 병렬 외주 개발자로 활용하여 대규모 코딩 작업을 수행합니다.

---

## 이런 분을 위한 도구입니다

- 3개 이상의 독립 모듈/파일을 동시에 만들어야 하는 분
- Claude 토큰을 절약하면서 대규모 코딩을 하고 싶은 분
- Codex CLI를 병렬 워커로 활용하고 싶은 분
- PM처럼 기획하고 검증하는 워크플로우를 원하는 분

---

## 어떻게 작동하나요?

7단계 워크플로우로 병렬 코딩을 수행합니다:

1. **기획** -- Claude가 PM으로서 "당연히 있어야 할 기능"까지 자체 설계
2. **분석** -- 독립 실행 가능한 서브태스크로 분해 (의존성 있으면 라운드 분리)
3. **설정** -- 각 서브태스크별 초상세 instruction + 동적 검증 게이트 작성
4. **실행** -- Codex CLI 인스턴스를 N개 병렬 스폰하여 동시 구현
5. **모니터링** -- 완료 대기 및 상태 확인
6. **검증** -- 동적 게이트(bash, 토큰 0)로 자동 검증 + 선택적 코드 리뷰
7. **통합** -- 서브태스크 간 인터페이스 확인, 필요 시 Codex에 수정 재위임

```
사용자 요청 → Claude PM 기획 → 태스크 분해 → Codex x N 병렬 실행
                                                    │
                              Claude 검토 ← 결과물 ←─┘
                                    │
                              통합 → 완성
```

---

## 설치 방법

### 마켓플레이스에서 설치 (추천)
```
/plugin marketplace add https://github.com/fivetaku/gptaku-plugins
/plugin install pumasi
```

### 처음 시작하기
```
/pumasi Todo 앱 만들어줘
```

### 사전 요구사항

```bash
# Codex CLI 설치 확인
which codex
# 없으면:
npm install -g @openai/codex

# yaml 의존성 (최초 1회)
cd <plugin-dir>/skills/pumasi-exec && npm install yaml
```

---

## 핵심 기능

### 1. Claude = PM, Codex = 구현자

Claude가 직접 코딩하지 않습니다. 기획/감독/검증만 하고, 실제 코드 생성은 Codex에게 위임합니다. Claude 토큰을 절약하면서 대규모 작업이 가능합니다.

### 2. N개 병렬 실행

독립적인 서브태스크를 여러 Codex 인스턴스가 동시에 구현합니다. 3개 모듈이면 3배 빠릅니다.

### 3. 동적 게이트 검증 (토큰 0)

각 태스크별로 bash 기반 검증 게이트를 자동 생성합니다. 파일 존재 확인, 타입 체크, 라이브러리 사용 확인 등을 토큰 소비 없이 수행합니다.

### 4. 라운드 기반 의존성 처리

서브태스크 간 의존성이 있으면 라운드로 분리하여 순서를 보장합니다:
- Round 1: 공유 유틸리티/모델 (병렬)
- Round 2: Round 1 결과를 사용하는 태스크 (병렬)
- Round 3: 최종 통합

### 5. Codex 특성 대응

Codex는 맥락을 추론하지 않으므로, 절대경로/함수 시그니처/import 문/설정 파일까지 모두 명시하는 instruction을 자동 작성합니다.

---

## 사용법

| 명령어 | 설명 |
|--------|------|
| `/pumasi [작업 설명]` | 품앗이 모드로 작업 시작 |
| `/pumasi` | 인터랙티브 메뉴 |

### 자연어 트리거

- "품앗이로 [작업]해줘"
- "품앗이 켜줘"
- "codex 외주로 [작업]"
- "codex한테 [작업] 시켜"

또는 3개 이상 독립 모듈을 동시에 만들어야 할 때 자동 감지.

---

## 구성요소

| 구성요소 | 설명 |
|----------|------|
| 커맨드 | `/pumasi` -- 메인 라우터 |
| 스킬 | `pumasi-exec` -- 7단계 Codex 병렬 실행 워크플로우 |

---

## 요구사항

- Claude Code CLI
- [Codex CLI](https://github.com/openai/codex) (`npm install -g @openai/codex`)
- Node.js 18+

---

## 라이선스

MIT
